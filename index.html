<!DOCTYPE html>
<html>

<head>
    <title>HTML to PDF Converter</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <h1>HTML to PDF Converter</h1>
    <form id="converter-form">
        <div class="textarea-group">
            <label for="header-input">Enter Header HTML:</label><br>
            <textarea id="header-input" rows="5" cols="50"></textarea><br>
            <label for="html-input">Enter Main HTML:</label><br>
            <textarea id="html-input" rows="10" cols="50"></textarea><br>
            <label for="footer-input">Enter Footer HTML:</label><br>
            <textarea id="footer-input" rows="5" cols="50"></textarea><br>
        </div>
        <div class="input-group">
            <label for="format">Format:</label><br>
            <select id="format">
                <option value="A4">A4</option>
                <option value="A3">A3</option>
                <option value="Letter">Letter</option>
            </select><br>
            <label for="landscape">Landscape:</label><br>
            <input type="checkbox" id="landscape"><br>
            <label for="margin-top">Top Margin:</label><br>
            <input type="text" id="margin-top"><br>
            <label for="margin-bottom">Bottom Margin:</label><br>
            <input type="text" id="margin-bottom"><br>
            <label for="margin-left">Left Margin:</label><br>
            <input type="text" id="margin-left"><br>
            <label for="margin-right">Right Margin:</label><br>
            <input type="text" id="margin-right"><br>
            <input type="submit" value="Convert to PDF">
        </div>
    </form>
    <div id="result"></div>

    <script>
        document.getElementById('converter-form').addEventListener('submit', function (event) {
            event.preventDefault();

            let headerHtml = document.getElementById('header-input').value;
            let mainHtml = document.getElementById('html-input').value;
            let footerHtml = document.getElementById('footer-input').value;
            let format = document.getElementById('format').value;
            let landscape = document.getElementById('landscape').checked;
            let marginTop = document.getElementById('margin-top').value;
            let marginBottom = document.getElementById('margin-bottom').value;
            let marginLeft = document.getElementById('margin-left').value;
            let marginRight = document.getElementById('margin-right').value;

            fetch('/pdf', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    header: headerHtml,
                    html: mainHtml,
                    footer: footerHtml,
                    format: format,
                    landscape: landscape,
                    margin: {
                        top: marginTop,
                        bottom: marginBottom,
                        left: marginLeft,
                        right: marginRight
                    }
                })
            })
                .then(response => response.blob())
                .then(blob => {
                    let url = window.URL.createObjectURL(blob);
                    let a = document.createElement('a');
                    a.href = url;
                    a.download = 'output';
                    a.click();
                })
                .catch(error => {
                    document.getElementById('result').textContent = 'Error: ' + error;
                });
        });
    </script>
</body>

</html>